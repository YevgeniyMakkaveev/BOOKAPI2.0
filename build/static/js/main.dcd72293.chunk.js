(this.webpackJsonpkniga2=this.webpackJsonpkniga2||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},33:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"bookLoad",(function(){return j})),n.d(r,"bookClear",(function(){return b})),n.d(r,"getTearm",(function(){return p})),n.d(r,"clearTearm",(function(){return m})),n.d(r,"getId",(function(){return f})),n.d(r,"clearId",(function(){return O}));var a=n(0),c=n.n(a),s=n(10),i=n.n(s),o=(n(28),n(29),n(6)),l=n(7),d=n(14),u=n(12),h=n(11),j=function(e){return{type:"BOOK_LOAD",payload:e}},b=function(){return{type:"BOOK_CLEAR"}},p=function(e,t,n){return{type:"GET_TEARM",tearm:e,field:t,priority:n}},m=function(){return{type:"CLEAR_TEARM"}},f=function(e){return{type:"GET_ID",selfId:e}},O=function(){return{type:"CLEAR_ID"}},v=n(13),x=(n(33),n(1)),g=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).onFieldChange=function(e){r.setState({field:e.target.value})},r.onPriorityChange=function(e){r.setState({priority:e.target.value})},r.onInput=function(e){e.preventDefault();var t=e.target.value;r.setState({tearm:t})},r.onSearchStart=function(e){e.preventDefault(),r.props.clearTearm();var t=r.state,n=t.tearm,a=t.field,c=t.priority;r.props.getTearm(n.toLowerCase(),a,c),r.setState({tearm:""})},r.state={tearm:"",field:"all",priority:"relevance"},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.tearm;return Object(x.jsxs)("div",{className:"component-body",children:[Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:"row justify-content-center align-items-center",children:[Object(x.jsx)("h1",{className:"title text-center",children:" \u041a\u041d\u0418\u0416\u041a\u0410 API-\u0428\u041a\u0410 "}),Object(x.jsxs)("form",{className:"searchPannel",onSubmit:this.onSearchStart,children:[Object(x.jsx)("input",{className:"pannel-serch form-control-sm ml-3 w-75",placeholder:"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u043f\u043e\u0438\u0441\u043a","aria-describedby":"button-addon2",onChange:this.onInput,value:e}),Object(x.jsx)("button",{className:"btn btn-warning",type:"button",id:"button-addon2",onClick:this.onSearchStart,children:"\u041f\u041e\u0418\u0421\u041a "})]})]})}),Object(x.jsx)("div",{className:"input-group",children:Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:"row justify-content-center align-items-center",children:[Object(x.jsxs)("select",{className:"form-select pannel-colour",onChange:this.onFieldChange,children:[Object(x.jsx)("option",{value:"all",children:"\u0432\u0441\u0435 "}),Object(x.jsx)("option",{value:"art",children:"\u0438\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u043e"}),Object(x.jsx)("option",{value:"biography",children:"\u0431\u0438\u043e\u0433\u0440\u0430\u0444\u0438\u0438"}),Object(x.jsx)("option",{value:"computers",children:"\u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u044b"}),Object(x.jsx)("option",{value:"history",children:"\u0438\u0441\u0442\u043e\u0440\u0438\u044f"}),Object(x.jsx)("option",{value:"medical",children:"\u043c\u0435\u0434\u0438\u0446\u0438\u043d\u0430"}),Object(x.jsx)("option",{value:"poetry",children:"\u043f\u043e\u044d\u0437\u0438\u044f"})]}),Object(x.jsxs)("select",{className:"form-select pannel-colour",onChange:this.onPriorityChange,children:[Object(x.jsx)("option",{value:"relevance",children:"\u0440\u0435\u043b\u0435\u0432\u0430\u043d\u0442\u043d\u044b\u0435 "}),Object(x.jsx)("option",{value:"newest",children:"\u043d\u043e\u0432\u044b\u0435"})]})]})})})]})}}]),n}(a.Component),k=Object(h.b)(null,(function(e){var t=Object(v.a)(r,e),n=t.clearTearm,a=t.getTearm;return{clearTearm:n,getTearm:function(e,t,n){a(e,t,n)}}}))(g),y={tearm:null,field:"all",priority:"relevance"},N={selfId:null},I=Object(v.b)({reducerSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TEARM":return{tearm:t.tearm,priority:t.priority,field:t.field};case"CLEAR_TEARM":return{tearm:null,field:"all",priority:"relevance"};default:return e}},modalReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ID":return{selfId:t.selfId};case"CLEAR_ID":return{selfId:null};default:return e}}}),w=n(15),L=n.n(w),C=n(21),S=function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,[{key:"getNormalBooks",value:function(){var e=Object(C.a)(L.a.mark((function e(t,n,r,a){var c;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(t,"&startIndex=").concat(a,"&maxResults=30&orderBy=").concat(r,"&subject=").concat(n,":keyes&key=AIzaSyAse8WG5nA-_-AdTK_4wpa4CUF5fmqc8zE"));case 2:if((c=e.sent).ok){e.next=5;break}throw new Error("Could not fetch data, recieved ".concat(c.status));case 5:return e.next=7,c.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"getSingleBook",value:function(){var e=Object(C.a)(L.a.mark((function e(t){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch data, recieved ".concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),A=n.p+"static/media/book-template.aeb8aa3d.png",D=(n(36),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).toModal=function(t){e.props.getId(t)},e}return Object(l.a)(n,[{key:"checkData",value:function(e){return e||""}},{key:"checkImg",value:function(e){return e||"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u043e"!==e?e:A}},{key:"render",value:function(){var e=this,t=this.props.selfLink,n=this.props,r=n.title,a=n.publisher,c=n.publishedDate,s=n.description,i=s||"",o=this.props.authors?this.props.authors.toString():"",l=this.props.categories?this.props.categories[0]:"",d=this.checkImg(this.props.thumbnail);return Object(x.jsx)("div",{className:"card mb-3 single-card",onClick:function(){e.toModal(t)},children:Object(x.jsxs)("div",{className:"row g-0",children:[Object(x.jsx)("div",{className:"col-md-4",children:Object(x.jsx)("img",{src:d,className:"img-fluid rounded-start",alt:"..."})}),Object(x.jsxs)("div",{className:"col-md-8",children:[Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)("p",{className:"card-text",children:Object(x.jsx)("small",{className:"text-muted",children:l})}),Object(x.jsx)("h5",{className:"card-title",children:this.checkData(r)}),Object(x.jsx)("h5",{className:"card-title",children:this.checkData(o)})]}),Object(x.jsxs)("div",{className:"row g-0",children:[Object(x.jsx)("p",{className:"card-text",children:Object(x.jsxs)("small",{className:"text-muted",children:["\u0418\u0437\u0434\u0430\u0442\u0435\u043b\u044c: ",a,",",c]})}),Object(x.jsx)("div",{className:"overview",children:i})]})]})]})})}}]),n}(a.Component)),T=Object(h.b)(null,(function(e){var t=Object(v.a)(r,e).getId;return{getId:function(e){t(e)}}}))(D),E=(n(37),function(){return Object(x.jsx)("div",{className:"loadingio-spinner-cube-c2syuy8vtzq",children:Object(x.jsxs)("div",{className:"ldio-7zwvhu4xshs",children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]})})}),M=n(46),B=(n(38),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={bookList:[],index:0,totalItems:null,isLoading:!1,needUpdate:!1},e.getApi=new S,e.updateBook=function(t){var n=e.props,r=n.tearm,a=n.field,c=n.priority,s=e.state,i=s.index,o=s.bookList;e.getApi.getNormalBooks(r,a,c,i).then((function(n){var r;r=t.tearm===e.props.tearm?o.concat(n.items):n.items,e.setState({bookList:r,isLoading:!1,totalItems:n.totalItems,needUpdate:!1})}))},e.onGetMore=function(){var t=+e.state.index+30;t<e.state.totalItems&&e.setState({index:t,isLoading:!0,needUpdate:!0})},e.getInit=function(t){e.setState({index:0,isLoading:!0}),e.updateBook(t)},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.tearm!==e.tearm?this.getInit(e):this.state.needUpdate&&this.updateBook(e)}},{key:"renderCard",value:function(e){var t=this.state.index;return e?e.map((function(e){t++;var n=e.selfLink,r=e.volumeInfo,a=r.title,c=r.publisher,s=r.publishedDate,i=r.description,o=r.authors,l=r.categories,d=(e.volumeInfo.imageLinks?e.volumeInfo.imageLinks:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u043e").thumbnail;return Object(x.jsx)(T,{title:a,publisher:c,publishedDate:s,description:i,thumbnail:d,authors:o,categories:l,selfLink:n},t)})):null}},{key:"render",value:function(){var e=this.state,t=e.bookList,n=e.isLoading,r=e.totalItems,a=e.index;if(!this.props.tearm)return null;if(n&&0===a)return Object(x.jsx)("div",{className:"spin-load",children:Object(x.jsx)(E,{})});var c=this.renderCard(t);return Object(x.jsxs)("div",{className:"component-nest",children:[Object(x.jsxs)("p",{className:"mb-3",children:["\u0412\u0441\u0435\u0433\u043e \u043d\u0430\u0439\u0434\u0435\u043d\u043e ",r," "]}),Object(x.jsxs)("div",{className:"row row-cols-1 row-cols-md-4 g-4 mt-2",children:[c,Object(x.jsx)(M.a,{show:n,dialogClassName:"my-modal2",centered:!0,children:Object(x.jsx)(E,{})})]}),Object(x.jsx)("div",{className:"d-grid gap-2",children:Object(x.jsx)("button",{className:"btn btn-danger big-one",onClick:this.onGetMore,children:" \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435."})})]})}}]),n}(a.Component)),R=Object(h.b)((function(e){return{tearm:e.reducerSearch.tearm,field:e.reducerSearch.field,priority:e.reducerSearch.priority}}))(B),_=(n(40),n(44)),G=n(45),U=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={bookData:[],isOpen:!0,isLoading:!1},e.getApi=new S,e.updateIndo=function(){var t=e.props.bookLink;t&&e.getApi.getSingleBook(t).then((function(t){e.setState({bookData:t.volumeInfo,isOpen:!0,isLoading:!1})}))},e.checkInfo=function(e){return e||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u044b"},e.getImg=function(e){return e.medium?e.thumbnail:e.small?e.small:A},e.openModal=function(){return e.setState({isOpen:!0})},e.closeModal=function(){e.setState({isOpen:!1,bookData:[]}),e.props.clearId()},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.bookLink!==e.bookLink&&(this.setState({isLoading:!0}),this.updateIndo())}},{key:"render",value:function(){if(!this.props.bookLink)return null;if(this.state.isLoading)return Object(x.jsxs)("div",{className:"spin-load",children:[" ",Object(x.jsx)(E,{})]});var e=this.state.bookData,t=e.title,n=e.description,r=e.categories,a=e.authors,c=e.publisher,s=e.publishedDate,i=this.state.bookData.imageLinks?this.getImg(this.state.bookData.imageLinks):A,o=a?a.toString():"\u0410\u0432\u0442\u043e\u0440\u044b \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u044b",l=n||"\u041d\u0435\u0442 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f";return Object(x.jsxs)(M.a,{show:this.state.isOpen,onHide:this.closeModal,onClick:this.closeModal,dialogClassName:"my-modal",children:[Object(x.jsx)(M.a.Header,{children:Object(x.jsxs)(M.a.Title,{children:["\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438: ",this.checkInfo(r)]})}),Object(x.jsxs)(_.a,{md:4,children:[Object(x.jsx)(G.a,{md:!0,children:Object(x.jsx)("img",{className:"modal-img",src:i,alt:"\u0442\u0435\u0441\u0442"})}),Object(x.jsx)(G.a,{children:Object(x.jsxs)("h2",{className:"bigger-stuff text-justify",children:[" ",t," "]})}),Object(x.jsx)(G.a,{children:Object(x.jsxs)("ul",{className:"list-text text-justify",children:[Object(x.jsxs)("li",{children:["\u0410\u0432\u0442\u043e\u0440\u044b: ",o]}),Object(x.jsxs)("li",{children:["\u0418\u0437\u0434\u0430\u0442\u0435\u043b\u044c: ",this.checkInfo(c)]}),Object(x.jsxs)("li",{children:["\u0413\u043e\u0434 \u0438\u0437\u0434\u0430\u043d\u0438\u044f: ",this.checkInfo(s)]})]})})]}),Object(x.jsx)(M.a.Body,{children:Object(x.jsx)("div",{className:"desc-text",children:l})})]})}}]),n}(a.Component),z=Object(h.b)((function(e){return{bookLink:e.modalReducer.selfId}}),(function(e){return{clearId:Object(v.a)(r,e).clearId}}))(U),P=(n(41),function(){return Object(x.jsxs)("div",{className:"error-msg",children:[Object(x.jsx)("h2",{className:"red",children:" \u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"}),Object(x.jsx)("h2",{children:" \u041e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435"})]})}),q=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={error:!1},e}return Object(l.a)(n,[{key:"componentDidCatch",value:function(){this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?Object(x.jsx)(P,{}):this.props.children}}]),n}(a.Component),F=Object(v.c)(I),K=function(){return Object(x.jsx)("div",{className:"App",children:Object(x.jsx)(q,{children:Object(x.jsxs)(h.a,{store:F,children:[Object(x.jsx)(k,{}),Object(x.jsx)(R,{}),Object(x.jsx)(z,{})]})})})};i.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(K,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.dcd72293.chunk.js.map